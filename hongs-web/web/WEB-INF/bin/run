#!/bin/bash

bindir=$(cd `dirname $0`; pwd)
CORE_PATH=`dirname $bindir`
JAVA_PATH=`command -v java`
JAVA_OPTS="$JAVA_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8787"
KLASSPATH="$CLASSPATH:$CORE_PATH/lib/*:$CORE_PATH/classes:$CORE_PATH/lib/classes"

# Check java is exists
if [ '' = "$JAVA_PATH" ]
then
    if [ '' = "$JAVA_HOME" ]
    then
        echo  "Java not found!"; exit 1
    else
        JAVA_PATH="$JAVA_HOME/bin/java"
    fi
fi

"$JAVA_PATH" $JAVA_OPTS \
 -classpath "$KLASSPATH"\
 -Dlog4j.configurationFile="$CORE_PATH/etc/log4j2.xml"\
 -Dlogs.dir="$CORE_PATH/var/log" \
 -Dtmps.dir="$CORE_PATH/var/tmp" \
 app.hongs.cmdlet.CmdletRunner $@\
 --corepath "$CORE_PATH"
